var timeline = ({"events": [
	{"order": "36",
	 "desc": "William Cragh is incarcerated",
	 "location":'<img style="width:300px;height:371;" src="/static/assets/images/johnaphywel/36.png"/>',
	"witnesses": [
	 					{
	 					"name":"John ap Hywel",
	 					"id":"36",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh is incarcerated",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Market Place",
	 					"event_loc":"The Dungeon",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"imprisonment"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"76",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"William Cragh is incarcerated",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"",
	 					"event_loc":"The Dungeon",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"imprisonment"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"258",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh is incarcerated",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"The Dungeon",
	 					"event_loc":"The Dungeon",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"imprisonment"
	 					} 
	 					
	 			   ]
	},

	{"order": "241",
	 "desc": "William Cragh is hanged",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/241.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"247",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Town Walls",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Henry Skinner",
	 					"id":"356",						
	 					"slug":"henry-skinner",							
	 					"desc":"William Cragh is hanged by his family",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Dafydd Asser"} , { "desc":"Gruffudd Foel"} , { "desc":"Uthel Fachen"} , { "desc":"Yry son of Veil"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"241",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Market Place",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"230",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"William Cragh is hanged by his family",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Dafydd Asser"} , { "desc":"Gruffudd Foel"} , { "desc":"Uthel Fachen"} , { "desc":"Yry son of Veil"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Mary de Briouze",
	 					"id":"28",						
	 					"slug":"mary-de-briouze",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Thomas Marshall",
	 					"id":"83",						
	 					"slug":"thomas-marshall",							
	 					"desc":"William Cragh is hanged by his family",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Dafydd Asser"} , { "desc":"Gruffudd Foel"} , { "desc":"Uthel Fachen"} , { "desc":"Yry son of Veil"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"West Gate",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Thomas Marshall",
	 					"id":"123",						
	 					"slug":"thomas-marshall",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"West Gate",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"196",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh is hanged by Uthel Fachen",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Uthel Fachen"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William de Briouze Jnr",
	 					"id":"198",						
	 					"slug":"william-de-briouze-jnr",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William of Codineston",
	 					"id":"78",						
	 					"slug":"william-of-codineston",							
	 					"desc":"William Cragh is hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					} 
	 					
	 			   ]
	},

	{"order": "242",
	 "desc": "The ladder is taken away from William Cragh",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/242.png"/>',
	"witnesses": []
	},

	{"order": "243",
	 "desc": "Trahaearn is hanged",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/243.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"249",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Town Walls",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Henry Skinner",
	 					"id":"345",						
	 					"slug":"henry-skinner",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"243",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Market Place",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"232",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Mary de Briouze",
	 					"id":"30",						
	 					"slug":"mary-de-briouze",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"54",						
	 					"slug":"william-cragh",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William of Codineston",
	 					"id":"77",						
	 					"slug":"william-of-codineston",							
	 					"desc":"Trahaearn is hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					} 
	 					
	 			   ]
	},

	{"order": "244",
	 "desc": "The beam of the gallows breaks",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/244.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"250",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[ { "desc":"gallows"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Town Walls",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"Henry Skinner",
	 					"id":"346",						
	 					"slug":"henry-skinner",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"244",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Market Place",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"237",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"Thomas Marshall",
	 					"id":"107",						
	 					"slug":"thomas-marshall",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"gallows"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"West Gate",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"51",						
	 					"slug":"william-cragh",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					}, 
	 					{
	 					"name":"William de Briouze Jnr",
	 					"id":"156",						
	 					"slug":"william-de-briouze-jnr",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"break"
	 					}, 
	 					{
	 					"name":"William of Codineston",
	 					"id":"72",						
	 					"slug":"william-of-codineston",							
	 					"desc":"The beam of the gallows breaks",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"beam"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"breaking"
	 					} 
	 					
	 			   ]
	},

	{"order": "245",
	 "desc": "William Cragh and Trahaearn are re-hanged",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/245.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"252",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Town Walls",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Henry Skinner",
	 					"id":"348",						
	 					"slug":"henry-skinner",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"245",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"hanging"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Market Place",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"296",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"Thomas Marshall",
	 					"id":"108",						
	 					"slug":"thomas-marshall",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"West Gate",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"53",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh and Trahaearn are re-hanged",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"Trahaearn ap Hywel"},{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Gallows",
	 					"event_loc":"Gallows",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"punishment"
	 					} 
	 					
	 			   ]
	},

	{"order": "246",
	 "desc": "William Cragh is taken down from the gallows",
	 "location":'<img style="width:300px;height:277;" src="/static/assets/images/johnaphywel/246.png"/>',
	"witnesses": []
	},

	{"order": "218",
	 "desc": "William Cragh is taken to the Church",
	 "location":'<img style="width:300px;height:380;" src="/static/assets/images/johnaphywel/218.png"/>',
	"witnesses": []
	},

	{"order": "217",
	 "desc": "William Cragh is taken to Thomas Mathews' house",
	 "location":'<img style="width:300px;height:314;" src="/static/assets/images/johnaphywel/217.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"215",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"William Cragh is carried to Thomas Mathews the burgess's house",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas Mathews' House"} ],
	 					"from":"Gallows",
	 					"to":"Thomas Mathews' house",
	 					"witness_loc":"",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"journey"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"217",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh is taken to Thomas Mathews' house",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas Mathews' House"} ],
	 					"from":"St John's Chapel",
	 					"to":"Thomas Mathews' house",
	 					"witness_loc":"",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"journey"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"63",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh is taken to Thomas Mathews' house",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas Mathews' House"} ],
	 					"from":"St John's Chapel",
	 					"to":"Thomas Mathews' house",
	 					"witness_loc":"",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"journey"
	 					} 
	 					
	 			   ]
	},

	{"order": "239",
	 "desc": "William Cragh lies on the ground",
	 "location":'<img style="width:300px;height:314;" src="/static/assets/images/johnaphywel/239.png"/>',
	"witnesses": []
	},

	{"order": "238",
	 "desc": "Great celebration at the death of William Cragh",
	 "location":'<img style="width:300px;height:380;" src="/static/assets/images/johnaphywel/238.png"/>',
	"witnesses": []
	},

	{"order": "34",
	 "desc": "William Cragh is measured to St Thomas",
	 "location":'<img style="width:300px;height:314;" src="/static/assets/images/johnaphywel/34.png"/>',
	"witnesses": [
	 					{
	 					"name":"Adam of Loughor",
	 					"id":"57",						
	 					"slug":"adam-of-loughor",							
	 					"desc":"William Cragh is measured to St Thomas",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas de Cantilupe"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"Henry Skinner",
	 					"id":"20",						
	 					"slug":"henry-skinner",							
	 					"desc":"William Cragh is measured to St Thomas",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas de Cantilupe"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"John ap Hywel",
	 					"id":"34",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh is measured to St Thomas",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas de Cantilupe"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Thomas Mathews' house",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"44",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh is measured to St Thomas",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Thomas Mathews' house",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"William of Codineston",
	 					"id":"69",						
	 					"slug":"william-of-codineston",							
	 					"desc":"William Cragh is measured to St Thomas",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"Thomas de Cantilupe"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Old Castle",
	 					"event_loc":"Thomas Mathews' house",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotiom"
	 					} 
	 					
	 			   ]
	},

	{"order": "11",
	 "desc": "William Cragh recovers",
	 "location":'<img style="width:300px;height:314;" src="/static/assets/images/johnaphywel/11.png"/>',
	"witnesses": []
	},

	{"order": "240",
	 "desc": "William Cragh looks up at John ap Hywel",
	 "location":'<img style="width:300px;height:314;" src="/static/assets/images/johnaphywel/240.png"/>',
	"witnesses": []
	},

	{"order": "43",
	 "desc": "William Cragh is taken to Hereford",
	 "location":'<img style="width:300px;height:225;" src="/static/assets/images/johnaphywel/43.png"/>',
	"witnesses": [
	 					{
	 					"name":"John ap Hywel",
	 					"id":"43",						
	 					"slug":"john-ap-hywel",							
	 					"desc":"William Cragh is taken to Hereford",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"pilgrimage"} ],
	 					"from":"Swansea",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"pilgrimage"
	 					}, 
	 					{
	 					"name":"John of Baggeham",
	 					"id":"15",						
	 					"slug":"john-of-baggeham",							
	 					"desc":"Mary de Briouze, William de Briouze Snr and William Cragh go to Hereford",
	 					"pathway":"heard",
	 					"subjects":[],
	 					"objects":[ { "desc":"pilgrimage"} ],
	 					"from":"Swansea",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"Swansea",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"pilrimage"
	 					}, 
	 					{
	 					"name":"Mary de Briouze",
	 					"id":"341",						
	 					"slug":"mary-de-briouze",							
	 					"desc":"Te Deum sung at Hereford",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"song"}],
	 					"objects":[],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Hereford Cathedral",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"social"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"Mary de Briouze",
	 					"id":"342",						
	 					"slug":"mary-de-briouze",							
	 					"desc":"Mary de Briouze and William Cragh go to Hereford",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Mary de Briouze"},{"desc":"William Cragh"},{"desc":"William de Briouze Snr"}],
	 					"objects":[ { "desc":"Hereford"} ],
	 					"from":"New Castle",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"Hereford Cathedral",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"pilgrimage"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"254",						
	 					"slug":"william-cragh",							
	 					"desc":"The miracle is proclaimed in Hereford ",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"miracle"}],
	 					"objects":[ { "desc":"Hereford"} ],
	 					"from":"",
	 					"to":"",
	 					"witness_loc":"Hereford Cathedral",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"William Cragh",
	 					"id":"263",						
	 					"slug":"william-cragh",							
	 					"desc":"William Cragh, Mary de Briouze and William de Briouze Snr go on pilgrimage to Hereford",
	 					"pathway":"witnessed",
	 					"subjects":[{"desc":"Mary de Briouze"},{"desc":"William Cragh"},{"desc":"William de Briouze Snr"}],
	 					"objects":[ { "desc":"pilgrimage"} , { "desc":"Hereford"} ],
	 					"from":"New Castle",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"Hereford Cathedral",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"journey"
	 					}, 
	 					{
	 					"name":"William de Briouze Jnr",
	 					"id":"22",						
	 					"slug":"william-de-briouze-jnr",							
	 					"desc":"William Cragh carries the string to Hereford",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"William Cragh"}],
	 					"objects":[ { "desc":"string"} ],
	 					"from":"Swansea",
	 					"to":"Tomb",
	 					"witness_loc":"",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"action"}],
	 					"event_subtype":"devotion"
	 					}, 
	 					{
	 					"name":"William de Briouze Jnr",
	 					"id":"23",						
	 					"slug":"william-de-briouze-jnr",							
	 					"desc":"William Cragh, Mary de Briouze, and William de Briouze Snr go on pilgrimage to Hereford",
	 					"pathway":"heard",
	 					"subjects":[],
	 					"objects":[ { "desc":"pilgrimage"} ],
	 					"from":"New Castle",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"Swansea",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"travel"}],
	 					"event_subtype":"pilgrimage"
	 					}, 
	 					{
	 					"name":"William of Codineston",
	 					"id":"65",						
	 					"slug":"william-of-codineston",							
	 					"desc":"William Cragh, Mary de Briouze and William de Briouze Snr go on pilgrimage to Hereford",
	 					"pathway":"heard",
	 					"subjects":[{"desc":"Mary de Briouze"},{"desc":"William Cragh"},{"desc":"William de Briouze Snr"}],
	 					"objects":[ { "desc":"pilgrimage"} ],
	 					"from":"New Castle",
	 					"to":"Hereford Cathedral",
	 					"witness_loc":"New Castle",
	 					"event_loc":"Hereford Cathedral",
	 					"event_types": [{"desc":"journey"}],
	 					"event_subtype":"pilgrimage"
	 					} 
	 					
	 			   ]
	}
] });

function getWitnesses(eventObject){
	var str = "" // <div>";
	for (w in eventObject.witnesses){
		// Close last div only if a new witness and not the first iteration
		if ( currWitness!=eventObject.witnesses[w].name && w!=0 ) { str = str + '</div>' }

		if ( currWitness!=eventObject.witnesses[w].name ){
		str = str + "<div class='witness-section'><span class='timeline-witness-header'>As "+eventObject.witnesses[w].pathway + ' by </span><span class="timeline-witness"><a href="../../witness-timeline/' + eventObject.witnesses[w].slug +'/witness.html#event-'+ eventObject.witnesses[w].id +'">' 
		+ eventObject.witnesses[w].name + "</a></span></b>"
				  + "<br />" + eventObject.witnesses[w].desc
		}
		else{
			str = str + "<br />" + eventObject.witnesses[w].desc
		}

		var currWitness = eventObject.witnesses[w].name;

		// Close last div only if end of loop
		if ( w==(eventObject.witnesses.length-1) ) { str = str + '</div>' }		
	};

	//str += "</div>";
	return str;
};

function getImageUrl(eventObject){
	var str = "";
	if (eventObject.location != 'Not specified'){
		str = eventObject.location
	}
	else {
		str = '<p>Nothing yet!<p>'
	}
	return str;
}


function Arrow_Points()
{ 
var s = $('#timeline-container').find('.timeline-item');
$.each(s,function(i,obj){
	var o = $(obj).offset()['left']
	// Check if it is the first iteration and store the left offset...
			if (i==0){
				minLeft=$(obj).offset()['left'];
			};
		if ( $(obj).offset()['left'] > minLeft  )
			{
			html = "<div class='tail-left'></div>";
			$(obj).prepend(html);
		
			}
		else
		{
			html = "<div class='tail-right'></div>";
			$(obj).prepend(html);
	
		}
	});
}


function AssignMargins(){ 
var s = $('#timeline-container').find('.timeline-item');
$.each(s,function(i,obj){
	var o = $(obj).offset()['left']
	// Check if it is the first iteration and store the left offset...
			if (i==0){
				minLeft=$(obj).offset()['left'];
			};
		if ( $(obj).offset()['left'] > (minLeft+100) ) /* || $(obj).offset()['left'] < 
				$( $('#timeline-container').find('.timeline-item')[1] ).offset()['left'] ) */
			{
			  $(obj).addClass('item-right')
				if ( $(obj).hasClass('item-left')){
					$(obj).removeClass('item-left')
				}
			}
		else
		{
			  $(obj).addClass('item-left')	
				if ( $(obj).hasClass('item-right') ){
					$(obj).removeClass('item-right')
				}			  
		}
	});
}
 





$(document).ready(function(){
	// Create a div for each event
	for (e in timeline.events){
		$('#timeline-container').append("<div id='timeline-item-"+ e +"' class='timeline-item large-6 columns'>"+ e + "</div>");
	};


	
	for (e in timeline.events){
		$($('.timeline-item')[e]).html(
		"<div class='timeline-content' id='event-"+ timeline.events[e].order +"'>" +
		"<h4 class='timeline-header'>"+ timeline.events[e].desc +"</h4>"+
		"<div class='timeline-left'>" + getImageUrl( timeline.events[e] ) +"</div>"+
		"<div class='timeline-right'>"+ 
					getWitnesses( timeline.events[e] )
		+ "</div>" +
		"</div>"
		);
	}

   	$('#timeline-item-0').after("<div class='timeline-item fake' style='height:1px;'> </div>")
	
    $($('.timeline-item')[0]).before(
	'<div class="timeline_container">'+
		'<div class="timeline">'+
			'<div class="plus"></div>'+
		'</div>' +
	'</div>'
	);
	
	
	window.setTimeout(masonryLayout, 1000);

});

function masonryLayout(){
	$('#timeline-container').masonry({itemSelector : '.timeline-item',transitionDuration: 0});
	
	AssignMargins();
	
	$('#timeline-container').masonry({itemSelector : '.timeline-item',transitionDuration: 0});
	
	AssignMargins();
	
	Arrow_Points()
	$('.fake').remove();
	var fakeHash = 	window.location.hash;
	window.location.hash = ''
	window.location.hash = fakeHash;
};
